@model SentinelMobile.Models.Driver

@{
    ViewBag.Title = "Driver ** List";
    ViewBag.HasLeftPanel = true;
    Layout = "~/Views/Shared/_DriverLayout.cshtml";  
}

@section Header {
    <script type="text/javascript">
        var IsAuthorizedPath = "@Url.Content("~/Home/IsAuthorized/")";

        $(document).ready(function () {
            setCookie('language', '@ViewBag.DefaultLanguage', 30);
            $("#divFootNavbar").hide();
        });

        window.onload = function () {
            $.ajax({
                url: IsAuthorizedPath,
                success: function (result) {
                    //if (result.indexOf("<!DOCTYPE html>") != -1) {
                    if (result.IsAuthorized == 0) {
                        location.replace('@Url.Content("~/Account/Login/")');
                        return;
                    }
                },
                error: function (msg) {
                }
            });
        }

        window.onunload = function () { };

        function setCookie(c_name, value, exdays) {
            var exdate = new Date();
            exdate.setDate(exdate.getDate() + exdays);
            var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString()) + "; path=@Url.Content("~")";
            document.cookie = c_name + "=" + c_value;

            c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString()) + "; path=@Url.Content("~")" + "Account/";
            document.cookie = c_name + "=" + c_value;
        }


    </script>

    <style type="text/css">
        .ui-panel-inner
        {
            padding: 0;
        }

        .ui-content
        {
            padding: 0;
        }

            .ui-content .ui-listview
            {
                margin: 0;
            }

        .ui-panel .ui-body-f
        {
            border: none;
        }

        .ui-panel ul.ui-listview li .ui-li
        {
            border-top: 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

    </style>
}

@section LeftPanel {
    <div data-role="panel" id="aboutpageleftpanel" data-theme="b" style="background: #555555">
        @Html.Partial("../Home/_leftMenu", new SentinelMobile.Models.LeftMenu("driverList"))
    </div>
    <!-- /panel -->
}

@section HeaderLeftButtons {
    <a href="#aboutpageleftpanel" data-role="button" data-icon="bars" data-iconpos="notext" data-shadow="false" data-iconshadow="false" data-inline="true">@SentinelMobile.Resources.Resources.Menu</a>
}
@section HeaderRightButtons {
    <a href="#" onclick="_getPendingList();" data-role="button" data-icon="edit" data-iconpos="notext" data-shadow="false" data-iconshadow="false" data-inline="true">Pending Statuses</a>
}




<div data-role="content" id="DriverList" style="padding-top: 0; margin-top: 0">
    <div id="listviewwrapper">
        <div data-role="fieldcontain" class="searchcontain">
        </div>
        <ul data-role="listview" data-filter="true" data-scroll="true" data-filter-placeholder="@SentinelMobile.Resources.HOSResources.SearchDrivers..." id="ulDriverList" >
            @if (ViewBag.DriverList != null && ViewBag.DriverList.Count > 0)
            {
                for (int i = 0; i < ViewBag.DriverList.Count; i++)
                {
                    SentinelMobile.Models.Driver driver = ViewBag.DriverList[i];        

                <li id="diverlist_@driver.DriverID">
                    <a href="#" onclick="javascript:DriverClick('@driver.DriverID','@driver.DriverName'); return false;" class="detailListText">
                        <h2>@driver.DriverName
                        </h2>
                    </a>
                </li>        
                }
            }
            else
            {
                <li>@SentinelMobile.Resources.HOSResources.NoDriverFound</li>
            }

        </ul>
    </div>
   

</div>


